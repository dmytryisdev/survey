var $=Object.defineProperty;var M=(t,e,l)=>e in t?$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var d=(t,e,l)=>M(t,typeof e!="symbol"?e+"":e,l);import{v as q,K as B,x as N,L as S,j as b,u,y as f,f as p,D as c,C as i,k as j,F as D,l as C,J as h,o as L,e as y,I as w,E as R,M as F,H as U,N as g}from"./index-3Kor65oi.js";import{s as E}from"./index-6i70kIGe.js";import{s as O,a as k}from"./index-Bt-ihKbX.js";import{s as T,a as z}from"./index-eBhsK8eo.js";import"./index-CZxLIdw9.js";import"./index-YeJWrO_C.js";class V{constructor(e={}){d(this,"id");d(this,"title");d(this,"questions");d(this,"description");this.id=e.id||"",this.title=e.title||"",this.questions=e.questions||[],this.description=e.description||""}}const H=t=>({id:t.toString(),title:`Опросник ${t}`,description:`Это пример опросника с фейковыми данными #${t}`,questions:[{id:"q1",text:"Как часто вы пользуетесь нашим продуктом?",type:"multiple__choice",answers:[{id:"a1",text:"Ежедневно",next__question__id:"q2"},{id:"a2",text:"Несколько раз в неделю",next__question__id:"q3"},{id:"a3",text:"Редко",next__question__id:"q4"}]},{id:"q2",text:"Что вам нравится в нашем продукте?",type:"text",answers:[]},{id:"q3",text:"Что бы вы хотели улучшить?",type:"text",answers:[]},{id:"q4",text:"Почему вы редко пользуетесь нашим продуктом?",type:"text",answers:[]}]}),I=()=>{const t=[];for(let e=1;e<=15;e++)t.push(new V(H(e)));return new Promise(e=>{setTimeout(()=>{e(t)},1e3)})},J={class:"flex flex-col gap-1"},K={class:"flex gap-2"},Q=q({__name:"Poll",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:B(["create-poll"],["update:modelValue"]),setup(t,{emit:e}){const l=N(t,"modelValue"),n=e,v=S({title:""}),_=({values:o})=>{const s={};return o.title.trim()||(s.title=[{message:"Поле обязательно для заполнения."}]),{errors:s}},x=({valid:o,states:s})=>{if(o)try{m(),n("create-poll",new V({id:Date.now().toString(),title:s.title.value}))}catch(r){console.error(r)}},m=()=>{l.value=!1};return(o,s)=>(p(),b(u(E),{visible:l.value,"onUpdate:visible":s[0]||(s[0]=r=>l.value=r),modal:!0,style:{width:"500px"},closable:!1,header:"Добавить опрос"},{default:f(()=>[c(u(T),{initialValues:v,resolver:_,validateOnValueUpdate:!1,validateOnBlur:!0,onSubmit:x,class:"flex flex-col gap-4"},{default:f(r=>{var a;return[i("div",J,[s[1]||(s[1]=i("label",{for:"title"},"Введите название опроса",-1)),c(u(O),{name:"title",type:"text",id:"title",fluid:""}),(a=r.title)!=null&&a.invalid?(p(),b(u(z),{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[D(C(r.title.error.message),1)]),_:2},1024)):j("",!0)]),i("div",K,[c(u(k),{type:"submit",severity:"secondary",label:"Сохранить",class:"flex-1"}),c(u(k),{type:"reset",variant:"outlined",severity:"secondary",label:"Отменить",class:"flex-1",onClick:m})])]}),_:1},8,["initialValues"])]),_:1},8,["visible"]))}}),A={class:"flex items-center justify-between gap-4"},G=["onClick"],W=["onClick"],oe=q({__name:"PollPage",setup(t){const e=F(),l=h(!1),n=h([]),v=async()=>{try{n.value=await I()}catch(o){console.error(o)}},_=o=>{n.value=n.value.filter(s=>s.id!==o)},x=()=>{l.value=!0},m=o=>{n.value.push(o)};return L(()=>v()),(o,s)=>{const r=U("RouterLink");return p(),y(w,null,[i("div",{class:"flex justify-between w-full items-center p-3"},[s[1]||(s[1]=i("span",{class:"font-bold"},"ФИО",-1)),i("button",{class:"cursor-pointer font-bold",onClick:x},"Добавить опрос")]),i("ul",null,[(p(!0),y(w,null,R(n.value,a=>(p(),y("li",{key:a.id,class:"border-b-2 border-b-gray-100"},[c(r,{to:{name:"poll-parameters",params:{id:a.id}},class:"flex items-center justify-between p-3"},{default:f(()=>[i("span",null,C(a.title),1),i("div",A,[i("button",{class:"cursor-pointer",onClick:g(P=>u(e).push({name:"poll-parameters",params:{id:a.id}}),["prevent"])}," Редактировать ",8,G),i("button",{class:"cursor-pointer",onClick:g(P=>_(a.id),["prevent"])},"Удалить",8,W)])]),_:2},1032,["to"])]))),128))]),c(Q,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=a=>l.value=a),onCreatePoll:m},null,8,["modelValue"])],64)}}});export{oe as default};
