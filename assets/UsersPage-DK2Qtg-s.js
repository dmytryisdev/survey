import{f as $}from"./Users-0KA9tobp.js";import{s as D}from"./index-DF6KBOTl.js";import{s as U}from"./index-D9BTvWvF.js";import{s as k}from"./index-nGnNsQCV.js";import{a as C,s as E}from"./index-CHFAN2pE.js";import"./index-8l750R_s.js";import{U as S}from"./index-C0BouqXd.js";import{v as h}from"./index-C3csVMgd.js";import{v as M,K as F,x as L,L as z,j as d,y as f,u as t,D as n,C as a,k as g,E as w,l as c,f as i,J as y,o as O,e as b,I as B,F as j}from"./index-CRPjOGYn.js";import{_ as I}from"./Loader.vue_vue_type_script_setup_true_lang-2bUFtFuA.js";import"./index-CCXqaYFU.js";const J={class:"flex flex-col gap-1"},K={class:"flex flex-col gap-1"},P={class:"flex gap-2"},T=M({__name:"User",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:F(["create-user"],["update:modelValue"]),setup(_,{emit:u}){const r=L(_,"modelValue"),m=u,p=z({fullName:"",email:""}),v=({values:l})=>{const e={};return l.fullName.trim()||(e.fullName=[{message:"Поле обязательно для заполнения."}]),l.email.trim()||(e.email=[{message:"Поле обязательно для заполнения."}]),l.email.trim()&&!h(l.email)&&(e.email=[{message:"Некорректный адрес электронной почты."}]),{errors:e}},x=({valid:l,states:e})=>{if(l)try{o(),m("create-user",new S({id:Date.now().toString(),fullName:e.fullName.value,email:e.email.value,isBanned:!1}))}catch(s){console.error(s)}},o=()=>{r.value=!1};return(l,e)=>(i(),d(t(D),{visible:r.value,"onUpdate:visible":e[0]||(e[0]=s=>r.value=s),modal:!0,style:{width:"500px"},closable:!1,header:"Добавить пользователя"},{default:f(()=>[n(t(E),{initialValues:p,resolver:v,validateOnValueUpdate:!1,validateOnBlur:!0,onSubmit:x,class:"flex flex-col gap-4"},{default:f(s=>{var N,V;return[a("div",J,[e[1]||(e[1]=a("label",{for:"fullName"},"Укажите ФИО пользователя",-1)),n(t(k),{name:"fullName",type:"text",id:"fullName",fluid:""}),(N=s.fullName)!=null&&N.invalid?(i(),d(t(C),{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[w(c(s.fullName.error.message),1)]),_:2},1024)):g("",!0)]),a("div",K,[e[2]||(e[2]=a("label",{for:"email"},"Укажите почту пользователя",-1)),n(t(k),{name:"email",type:"text",id:"email",fluid:""}),(V=s.email)!=null&&V.invalid?(i(),d(t(C),{key:0,severity:"error",size:"small",variant:"simple"},{default:f(()=>[w(c(s.email.error.message),1)]),_:2},1024)):g("",!0)]),a("div",P,[n(t(U),{type:"submit",severity:"secondary",label:"Сохранить",class:"flex-1"}),n(t(U),{type:"reset",variant:"outlined",severity:"secondary",label:"Отменить",class:"flex-1",onClick:o})])]}),_:1},8,["initialValues"])]),_:1},8,["visible"]))}}),q={class:"flex-2"},A={class:"flex-2"},se=M({__name:"UsersPage",setup(_){const u=y(!0),r=y([]),m=y(!1),p=async()=>{try{r.value=await $()}catch(o){console.error(o)}finally{u.value=!1}},v=()=>{m.value=!0},x=o=>{r.value.push(o)};return O(()=>p()),(o,l)=>(i(),b(B,null,[a("div",{class:"flex items-center p-3"},[l[1]||(l[1]=a("span",{class:"flex-2 font-bold"},"ФИО",-1)),l[2]||(l[2]=a("span",{class:"flex-2 font-bold"},"Email",-1)),a("button",{class:"cursor-pointer flex-1 text-left font-bold",onClick:v},"Добавить пользователя")]),u.value?(i(),d(I,{key:0})):g("",!0),a("ul",null,[(i(!0),b(B,null,j(r.value,e=>(i(),b("li",{key:e.id,class:"flex items-center p-3 border-b-2 border-b-gray-100"},[a("span",q,c(e.fullName),1),a("span",A,c(e.email),1),l[3]||(l[3]=a("button",{class:"cursor-pointer flex-1 text-left"},"Редактировать",-1))]))),128))]),n(T,{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),onCreateUser:x},null,8,["modelValue"])],64))}});export{se as default};
