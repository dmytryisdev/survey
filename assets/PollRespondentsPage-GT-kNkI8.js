var $=Object.defineProperty;var j=(i,a,l)=>a in i?$(i,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[a]=l;var k=(i,a,l)=>j(i,typeof a!="symbol"?a+"":a,l);import{s as D}from"./index-h_wauJWV.js";import{s as w,a as M}from"./index-DFL_TycD.js";import{a as R,s as E}from"./index-Cs4i-wFl.js";import"./index-CeAee67X.js";import{U as S}from"./index-C0BouqXd.js";import{v as F}from"./index-C3csVMgd.js";import{v as U,K as z,x as A,L,j as b,y as c,u as n,D as r,C as t,k as B,F as C,l as u,f as d,J as N,e as _,I as h,E as O}from"./index-CHvxE_SD.js";import"./index-4WTNm8ul.js";class p extends S{constructor(l={}){super(l);k(this,"status");this.status=l.status||""}}const P={class:"flex flex-col gap-1"},T={class:"flex flex-col gap-1"},I={class:"flex gap-2"},J=U({__name:"Respondent",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:z(["add-respondent"],["update:modelValue"]),setup(i,{emit:a}){const l=A(i,"modelValue"),v=a,f=L({fullName:"",email:""}),x=({values:s})=>{const e={};return s.fullName.trim()||(e.fullName=[{message:"Поле обязательно для заполнения."}]),s.email.trim()||(e.email=[{message:"Поле обязательно для заполнения."}]),s.email.trim()&&!F(s.email)&&(e.email=[{message:"Некорректный адрес электронной почты."}]),{errors:e}},y=({valid:s,states:e})=>{if(s)try{m(),v("add-respondent",new p({id:Date.now().toString(),fullName:e.fullName.value,email:e.email.value,status:"invited"}))}catch(o){console.error(o)}},m=()=>{l.value=!1};return(s,e)=>(d(),b(n(D),{visible:l.value,"onUpdate:visible":e[0]||(e[0]=o=>l.value=o),modal:!0,style:{width:"500px"},closable:!1,header:"Добавить респондента"},{default:c(()=>[r(n(E),{initialValues:f,resolver:x,validateOnValueUpdate:!1,validateOnBlur:!0,onSubmit:y,class:"flex flex-col gap-4"},{default:c(o=>{var g,V;return[t("div",P,[e[1]||(e[1]=t("label",{for:"fullName"},"Укажите ФИО пользователя",-1)),r(n(w),{name:"fullName",type:"text",id:"fullName",fluid:""}),(g=o.fullName)!=null&&g.invalid?(d(),b(n(R),{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[C(u(o.fullName.error.message),1)]),_:2},1024)):B("",!0)]),t("div",T,[e[2]||(e[2]=t("label",{for:"email"},"Укажите почту пользователя",-1)),r(n(w),{name:"email",type:"text",id:"email",fluid:""}),(V=o.email)!=null&&V.invalid?(d(),b(n(R),{key:0,severity:"error",size:"small",variant:"simple"},{default:c(()=>[C(u(o.email.error.message),1)]),_:2},1024)):B("",!0)]),t("div",I,[r(n(M),{type:"submit",severity:"secondary",label:"Сохранить",class:"flex-1"}),r(n(M),{type:"reset",variant:"outlined",severity:"secondary",label:"Отменить",class:"flex-1",onClick:m})])]}),_:1},8,["initialValues"])]),_:1},8,["visible"]))}}),K={class:"flex-2 justify-center"},q={class:"flex-2 justify-center"},G={class:"flex-1 justify-center"},te=U({__name:"PollRespondentsPage",setup(i){const a={invited:"Приглашен",started:"Начал прохождение",completed:"Завершил"},l=N(!1),v=N(null),f=N([new p({id:"1",fullName:"Смирнов И.И.",email:"smirnov@yandex.ru",status:"invited"}),new p({id:"2",fullName:"Иванов И.А.",email:"ivanovv@yandex.ru",status:"started"}),new p({id:"3",fullName:"Александров Б.Ю.",email:"alexndrv@yandex.ru",status:"completed"})]),x=()=>{v.value=null,l.value=!0},y=m=>{f.value.push(m)};return(m,s)=>(d(),_(h,null,[t("div",{class:"flex items-center p-3"},[s[1]||(s[1]=t("span",{class:"flex-2 font-bold"},"ФИО",-1)),s[2]||(s[2]=t("span",{class:"flex-2 font-bold"},"Email",-1)),t("button",{class:"flex-1 text-left font-bold cursor-pointer",onClick:x},"Добавить респондента")]),t("ul",null,[(d(!0),_(h,null,O(f.value,e=>(d(),_("li",{key:e.id,class:"flex items-center p-3 border-b-2 border-b-gray-100"},[t("span",K,u(e.fullName),1),t("span",q,u(e.email),1),t("span",G,u(a[e.status||"invited"]),1)]))),128))]),r(J,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),onAddRespondent:y},null,8,["modelValue"])],64))}});export{te as default};
