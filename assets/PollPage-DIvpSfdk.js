var B=Object.defineProperty;var L=(t,e,o)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var m=(t,e,o)=>L(t,typeof e!="symbol"?e+"":e,o);import{v as C,K as N,x as S,L as j,j as w,u as n,y as v,f as c,D as d,C as i,k as V,E as D,l as $,J as b,o as R,e as h,I as g,F,M as U,H as E,N as k}from"./index-CRPjOGYn.js";import{s as O}from"./index-DF6KBOTl.js";import{s as q}from"./index-D9BTvWvF.js";import{s as T}from"./index-nGnNsQCV.js";import{s as z,a as H}from"./index-CHFAN2pE.js";import"./index-8l750R_s.js";import{_ as I}from"./Loader.vue_vue_type_script_setup_true_lang-2bUFtFuA.js";import"./index-CCXqaYFU.js";class P{constructor(e={}){m(this,"id");m(this,"title");m(this,"questions");m(this,"description");this.id=e.id||"",this.title=e.title||"",this.questions=e.questions||[],this.description=e.description||""}}const J=t=>({id:t.toString(),title:`Опросник ${t}`,description:`Это пример опросника с фейковыми данными #${t}`,questions:[{id:"q1",text:"Как часто вы пользуетесь нашим продуктом?",type:"multiple__choice",answers:[{id:"a1",text:"Ежедневно",next__question__id:"q2"},{id:"a2",text:"Несколько раз в неделю",next__question__id:"q3"},{id:"a3",text:"Редко",next__question__id:"q4"}]},{id:"q2",text:"Что вам нравится в нашем продукте?",type:"text",answers:[]},{id:"q3",text:"Что бы вы хотели улучшить?",type:"text",answers:[]},{id:"q4",text:"Почему вы редко пользуетесь нашим продуктом?",type:"text",answers:[]}]}),K=()=>{const t=[];for(let e=1;e<=15;e++)t.push(new P(J(e)));return new Promise(e=>{setTimeout(()=>{e(t)},1e3)})},Q={class:"flex flex-col gap-1"},A={class:"flex gap-2"},G=C({__name:"Poll",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:N(["create-poll"],["update:modelValue"]),setup(t,{emit:e}){const o=S(t,"modelValue"),p=e,a=j({title:""}),x=({values:u})=>{const s={};return u.title.trim()||(s.title=[{message:"Поле обязательно для заполнения."}]),{errors:s}},y=({valid:u,states:s})=>{if(u)try{f(),p("create-poll",new P({id:Date.now().toString(),title:s.title.value}))}catch(l){console.error(l)}},f=()=>{o.value=!1};return(u,s)=>(c(),w(n(O),{visible:o.value,"onUpdate:visible":s[0]||(s[0]=l=>o.value=l),modal:!0,style:{width:"500px"},closable:!1,header:"Добавить опрос"},{default:v(()=>[d(n(z),{initialValues:a,resolver:x,validateOnValueUpdate:!1,validateOnBlur:!0,onSubmit:y,class:"flex flex-col gap-4"},{default:v(l=>{var _;return[i("div",Q,[s[1]||(s[1]=i("label",{for:"title"},"Введите название опроса",-1)),d(n(T),{name:"title",type:"text",id:"title",fluid:""}),(_=l.title)!=null&&_.invalid?(c(),w(n(H),{key:0,severity:"error",size:"small",variant:"simple"},{default:v(()=>[D($(l.title.error.message),1)]),_:2},1024)):V("",!0)]),i("div",A,[d(n(q),{type:"submit",severity:"secondary",label:"Сохранить",class:"flex-1"}),d(n(q),{type:"reset",variant:"outlined",severity:"secondary",label:"Отменить",class:"flex-1",onClick:f})])]}),_:1},8,["initialValues"])]),_:1},8,["visible"]))}}),W={class:"flex items-center justify-between gap-4"},X=["onClick"],Y=["onClick"],ne=C({__name:"PollPage",setup(t){const e=U(),o=b(!0),p=b(!1),a=b([]),x=async()=>{try{a.value=await K()}catch(s){console.error(s)}finally{o.value=!1}},y=s=>{a.value=a.value.filter(l=>l.id!==s)},f=()=>{p.value=!0},u=s=>{a.value.push(s)};return R(()=>x()),(s,l)=>{const _=E("RouterLink");return c(),h(g,null,[i("div",{class:"flex justify-between w-full items-center p-3"},[l[1]||(l[1]=i("span",{class:"font-bold"},"ФИО",-1)),i("button",{class:"cursor-pointer font-bold",onClick:f},"Добавить опрос")]),o.value?(c(),w(I,{key:0})):V("",!0),i("ul",null,[(c(!0),h(g,null,F(a.value,r=>(c(),h("li",{key:r.id,class:"border-b-2 border-b-gray-100"},[d(_,{to:{name:"poll-parameters",params:{id:r.id}},class:"flex items-center justify-between p-3"},{default:v(()=>[i("span",null,$(r.title),1),i("div",W,[i("button",{class:"cursor-pointer",onClick:k(M=>n(e).push({name:"poll-parameters",params:{id:r.id}}),["prevent"])}," Редактировать ",8,X),i("button",{class:"cursor-pointer",onClick:k(M=>y(r.id),["prevent"])},"Удалить",8,Y)])]),_:2},1032,["to"])]))),128))]),d(G,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=r=>p.value=r),onCreatePoll:u},null,8,["modelValue"])],64)}}});export{ne as default};
